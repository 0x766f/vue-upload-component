{"version":3,"file":"vue-upload-component.min.js","sources":["vue-upload-component.js"],"sourcesContent":["/*!\n Name: vue-upload-component \nComponent URI: https://github.com/lian-yue/vue-upload-component#readme \nVersion: 3.0.34 \nAuthor: LianYue \nLicense: Apache-2.0 \nDescription: Vue.js file upload component, Multi-file upload, Upload directory, Drag upload, Drag the directory, Upload multiple files at the same time, html4 (IE 9), `PUT` method, Customize the filter \n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('vue')) :\n  typeof define === 'function' && define.amd ? define(['vue'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.VueUploadComponent = factory(global.Vue));\n}(this, (function (vue) { 'use strict';\n\n  function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\n  function _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\n  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\n  function _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\n  function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\n  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n  function _ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { _ownKeys(Object(source), true).forEach(function (key) { _defineProperty2(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { _ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  function _defineProperty2(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n  /**\n   * Creates a XHR request\n   *\n   * @param {Object} options\n   */\n\n\n  var createRequest = function createRequest(options) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(options.method || 'GET', options.url);\n    xhr.responseType = 'json';\n\n    if (options.headers) {\n      Object.keys(options.headers).forEach(function (key) {\n        xhr.setRequestHeader(key, options.headers[key]);\n      });\n    }\n\n    return xhr;\n  };\n  /**\n   * Sends a XHR request with certain body\n   *\n   * @param {XMLHttpRequest} xhr\n   * @param {Object} body\n   */\n\n\n  var sendRequest = function sendRequest(xhr, body) {\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n\n          try {\n            response = JSON.parse(xhr.response);\n          } catch (err) {\n            response = xhr.response;\n          }\n\n          resolve(response);\n        } else {\n          reject(xhr.response);\n        }\n      };\n\n      xhr.onerror = function () {\n        return reject(xhr.response);\n      };\n\n      xhr.send(JSON.stringify(body));\n    });\n  };\n  /**\n   * Sends a XHR request with certain form data\n   *\n   * @param {XMLHttpRequest} xhr\n   * @param {Object} data\n   */\n\n\n  var sendFormRequest = function sendFormRequest(xhr, data) {\n    var body = new FormData();\n\n    for (var name in data) {\n      body.append(name, data[name]);\n    }\n\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n\n          try {\n            response = JSON.parse(xhr.response);\n          } catch (err) {\n            response = xhr.response;\n          }\n\n          resolve(response);\n        } else {\n          reject(xhr.response);\n        }\n      };\n\n      xhr.onerror = function () {\n        return reject(xhr.response);\n      };\n\n      xhr.send(body);\n    });\n  };\n  /**\n   * Creates and sends XHR request\n   *\n   * @param {Object} options\n   *\n   * @returns Promise\n   */\n\n\n  function request(options) {\n    var xhr = createRequest(options);\n    return sendRequest(xhr, options.body);\n  }\n\n  var ChunkUploadHandler = /*#__PURE__*/function () {\n    /**\n     * Constructor\n     *\n     * @param {File} file\n     * @param {Object} options\n     */\n    function ChunkUploadHandler(file, options) {\n      _classCallCheck(this, ChunkUploadHandler);\n\n      this.file = file;\n      this.options = options;\n      this.chunks = [];\n      this.sessionId = null;\n      this.chunkSize = null;\n    }\n    /**\n     * Gets the max retries from options\n     */\n\n\n    _createClass(ChunkUploadHandler, [{\n      key: \"createChunks\",\n\n      /**\n       * Creates all the chunks in the initial state\n       */\n      value: function createChunks() {\n        this.chunks = [];\n        var start = 0;\n        var end = this.chunkSize;\n\n        while (start < this.fileSize) {\n          this.chunks.push({\n            blob: this.file.file.slice(start, end),\n            startOffset: start,\n            active: false,\n            retries: this.maxRetries\n          });\n          start = end;\n          end = start + this.chunkSize;\n        }\n      }\n      /**\n       * Updates the progress of the file with the handler's progress\n       */\n\n    }, {\n      key: \"updateFileProgress\",\n      value: function updateFileProgress() {\n        this.file.progress = this.progress;\n      }\n      /**\n       * Paues the upload process\n       * - Stops all active requests\n       * - Sets the file not active\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.file.active = false;\n        this.stopChunks();\n      }\n      /**\n       * Stops all the current chunks\n       */\n\n    }, {\n      key: \"stopChunks\",\n      value: function stopChunks() {\n        this.chunksUploading.forEach(function (chunk) {\n          chunk.xhr.abort();\n          chunk.active = false;\n        });\n      }\n      /**\n       * Resumes the file upload\n       * - Sets the file active\n       * - Starts the following chunks\n       */\n\n    }, {\n      key: \"resume\",\n      value: function resume() {\n        this.file.active = true;\n        this.startChunking();\n      }\n      /**\n       * Starts the file upload\n       *\n       * @returns Promise\n       * - resolve  The file was uploaded\n       * - reject   The file upload failed\n       */\n\n    }, {\n      key: \"upload\",\n      value: function upload() {\n        var _this = this;\n\n        this.promise = new Promise(function (resolve, reject) {\n          _this.resolve = resolve;\n          _this.reject = reject;\n        });\n        this.start();\n        return this.promise;\n      }\n      /**\n       * Start phase\n       * Sends a request to the backend to initialise the chunks\n       */\n\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n\n        request({\n          method: 'POST',\n          headers: _objectSpread2(_objectSpread2({}, this.headers), {}, {\n            'Content-Type': 'application/json'\n          }),\n          url: this.action,\n          body: _objectSpread2(_objectSpread2({}, this.startBody), {}, {\n            phase: 'start',\n            mime_type: this.fileType,\n            size: this.fileSize,\n            name: this.fileName\n          })\n        }).then(function (res) {\n          if (res.status !== 'success') {\n            _this2.file.response = res;\n            return _this2.reject('server');\n          }\n\n          _this2.sessionId = res.data.session_id;\n          _this2.chunkSize = res.data.end_offset;\n\n          _this2.createChunks();\n\n          _this2.startChunking();\n        }).catch(function (res) {\n          _this2.file.response = res;\n\n          _this2.reject('server');\n        });\n      }\n      /**\n       * Starts to upload chunks\n       */\n\n    }, {\n      key: \"startChunking\",\n      value: function startChunking() {\n        for (var i = 0; i < this.maxActiveChunks; i++) {\n          this.uploadNextChunk();\n        }\n      }\n      /**\n       * Uploads the next chunk\n       * - Won't do anything if the process is paused\n       * - Will start finish phase if there are no more chunks to upload\n       */\n\n    }, {\n      key: \"uploadNextChunk\",\n      value: function uploadNextChunk() {\n        if (this.file.active) {\n          if (this.hasChunksToUpload) {\n            return this.uploadChunk(this.chunksToUpload[0]);\n          }\n\n          if (this.chunksUploading.length === 0) {\n            return this.finish();\n          }\n        }\n      }\n      /**\n       * Uploads a chunk\n       * - Sends the chunk to the backend\n       * - Sets the chunk as uploaded if everything went well\n       * - Decreases the number of retries if anything went wrong\n       * - Fails if there are no more retries\n       *\n       * @param {Object} chunk\n       */\n\n    }, {\n      key: \"uploadChunk\",\n      value: function uploadChunk(chunk) {\n        var _this3 = this;\n\n        chunk.progress = 0;\n        chunk.active = true;\n        this.updateFileProgress();\n        chunk.xhr = createRequest({\n          method: 'POST',\n          headers: this.headers,\n          url: this.action\n        });\n        chunk.xhr.upload.addEventListener('progress', function (evt) {\n          if (evt.lengthComputable) {\n            chunk.progress = Math.round(evt.loaded / evt.total * 100);\n          }\n        }, false);\n        sendFormRequest(chunk.xhr, _objectSpread2(_objectSpread2({}, this.uploadBody), {}, {\n          phase: 'upload',\n          session_id: this.sessionId,\n          start_offset: chunk.startOffset,\n          chunk: chunk.blob\n        })).then(function (res) {\n          chunk.active = false;\n\n          if (res.status === 'success') {\n            chunk.uploaded = true;\n          } else {\n            if (chunk.retries-- <= 0) {\n              _this3.stopChunks();\n\n              return _this3.reject('upload');\n            }\n          }\n\n          _this3.uploadNextChunk();\n        }).catch(function () {\n          chunk.active = false;\n\n          if (chunk.retries-- <= 0) {\n            _this3.stopChunks();\n\n            return _this3.reject('upload');\n          }\n\n          _this3.uploadNextChunk();\n        });\n      }\n      /**\n       * Finish phase\n       * Sends a request to the backend to finish the process\n       */\n\n    }, {\n      key: \"finish\",\n      value: function finish() {\n        var _this4 = this;\n\n        this.updateFileProgress();\n        request({\n          method: 'POST',\n          headers: _objectSpread2(_objectSpread2({}, this.headers), {}, {\n            'Content-Type': 'application/json'\n          }),\n          url: this.action,\n          body: _objectSpread2(_objectSpread2({}, this.finishBody), {}, {\n            phase: 'finish',\n            session_id: this.sessionId\n          })\n        }).then(function (res) {\n          _this4.file.response = res;\n\n          if (res.status !== 'success') {\n            return _this4.reject('server');\n          }\n\n          _this4.resolve(res);\n        }).catch(function (res) {\n          _this4.file.response = res;\n\n          _this4.reject('server');\n        });\n      }\n    }, {\n      key: \"maxRetries\",\n      get: function get() {\n        return parseInt(this.options.maxRetries, 10);\n      }\n      /**\n       * Gets the max number of active chunks being uploaded at once from options\n       */\n\n    }, {\n      key: \"maxActiveChunks\",\n      get: function get() {\n        return parseInt(this.options.maxActive, 10);\n      }\n      /**\n       * Gets the file type\n       */\n\n    }, {\n      key: \"fileType\",\n      get: function get() {\n        return this.file.type;\n      }\n      /**\n       * Gets the file size\n       */\n\n    }, {\n      key: \"fileSize\",\n      get: function get() {\n        return this.file.size;\n      }\n      /**\n       * Gets the file name\n       */\n\n    }, {\n      key: \"fileName\",\n      get: function get() {\n        return this.file.name;\n      }\n      /**\n       * Gets action (url) to upload the file\n       */\n\n    }, {\n      key: \"action\",\n      get: function get() {\n        return this.options.action || null;\n      }\n      /**\n       * Gets the body to be merged when sending the request in start phase\n       */\n\n    }, {\n      key: \"startBody\",\n      get: function get() {\n        return this.options.startBody || {};\n      }\n      /**\n       * Gets the body to be merged when sending the request in upload phase\n       */\n\n    }, {\n      key: \"uploadBody\",\n      get: function get() {\n        return this.options.uploadBody || {};\n      }\n      /**\n       * Gets the body to be merged when sending the request in finish phase\n       */\n\n    }, {\n      key: \"finishBody\",\n      get: function get() {\n        return this.options.finishBody || {};\n      }\n      /**\n       * Gets the headers of the requests from options\n       */\n\n    }, {\n      key: \"headers\",\n      get: function get() {\n        return this.options.headers || {};\n      }\n      /**\n       * Whether it's ready to upload files or not\n       */\n\n    }, {\n      key: \"readyToUpload\",\n      get: function get() {\n        return !!this.chunks;\n      }\n      /**\n       * Gets the progress of the chunk upload\n       * - Gets all the completed chunks\n       * - Gets the progress of all the chunks that are being uploaded\n       */\n\n    }, {\n      key: \"progress\",\n      get: function get() {\n        var _this5 = this;\n\n        var completedProgress = this.chunksUploaded.length / this.chunks.length * 100;\n        var uploadingProgress = this.chunksUploading.reduce(function (progress, chunk) {\n          return progress + (chunk.progress | 0) / _this5.chunks.length;\n        }, 0);\n        return Math.min(completedProgress + uploadingProgress, 100);\n      }\n      /**\n       * Gets all the chunks that are pending to be uploaded\n       */\n\n    }, {\n      key: \"chunksToUpload\",\n      get: function get() {\n        console.log(this.chunks);\n        return this.chunks.filter(function (chunk) {\n          return !chunk.active && !chunk.uploaded;\n        });\n      }\n      /**\n       * Whether there are chunks to upload or not\n       */\n\n    }, {\n      key: \"hasChunksToUpload\",\n      get: function get() {\n        return this.chunksToUpload.length > 0;\n      }\n      /**\n       * Gets all the chunks that are uploading\n       */\n\n    }, {\n      key: \"chunksUploading\",\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !!chunk.xhr && !!chunk.active;\n        });\n      }\n      /**\n       * Gets all the chunks that have finished uploading\n       */\n\n    }, {\n      key: \"chunksUploaded\",\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !!chunk.uploaded;\n        });\n      }\n    }]);\n\n    return ChunkUploadHandler;\n  }();\n\n  var CHUNK_DEFAULT_OPTIONS = {\n    headers: {},\n    action: '',\n    minSize: 1048576,\n    maxActive: 3,\n    maxRetries: 5,\n    handler: ChunkUploadHandler\n  };\n  var script = vue.defineComponent({\n    props: {\n      inputId: {\n        type: String\n      },\n      name: {\n        type: String,\n        default: 'file'\n      },\n      accept: {\n        type: String\n      },\n      capture: {},\n      disabled: {\n        default: false\n      },\n      multiple: {\n        type: Boolean,\n        default: false\n      },\n      maximum: {\n        type: Number\n      },\n      addIndex: {\n        type: [Boolean, Number]\n      },\n      directory: {\n        type: Boolean\n      },\n      createDirectory: {\n        type: Boolean,\n        default: false\n      },\n      postAction: {\n        type: String\n      },\n      putAction: {\n        type: String\n      },\n      customAction: {\n        type: Function\n      },\n      headers: {\n        type: Object,\n        default: function _default() {\n          return {};\n        }\n      },\n      data: {\n        type: Object,\n        default: function _default() {\n          return {};\n        }\n      },\n      timeout: {\n        type: Number,\n        default: 0\n      },\n      drop: {\n        default: false\n      },\n      dropDirectory: {\n        type: Boolean,\n        default: true\n      },\n      size: {\n        type: Number,\n        default: 0\n      },\n      extensions: {\n        type: [RegExp, String, Array],\n        default: function _default() {\n          return [];\n        }\n      },\n      modelValue: {\n        type: Array,\n        default: function _default() {\n          return [];\n        }\n      },\n      thread: {\n        type: Number,\n        default: 1\n      },\n      // Chunk upload enabled\n      chunkEnabled: {\n        type: Boolean,\n        default: false\n      },\n      // Chunk upload properties\n      chunk: {\n        type: Object,\n        default: function _default() {\n          return CHUNK_DEFAULT_OPTIONS;\n        }\n      }\n    },\n    emits: ['update:modelValue', 'input-filter', 'input-file'],\n    data: function data() {\n      return {\n        files: this.modelValue,\n        features: {\n          html5: true,\n          directory: false,\n          drop: false\n        },\n        active: false,\n        dropActive: false,\n        uploading: 0,\n        destroy: false,\n        maps: {},\n        dropElement: null\n      };\n    },\n\n    /**\r\n     * mounted\r\n     * @return {[type]} [description]\r\n     */\n    mounted: function mounted() {\n      var _this6 = this;\n\n      var input = document.createElement('input');\n      input.type = 'file';\n      input.multiple = true; // html5 特征\n\n      if (window.FormData && input.files) {\n        // 上传目录特征\n        // @ts-ignore\n        if (typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean') {\n          this.features.directory = true;\n        } // 拖拽特征\n\n\n        if (this.features.html5 && typeof input.ondrop !== 'undefined') {\n          this.features.drop = true;\n        }\n      } else {\n        this.features.html5 = false;\n      } // files 定位缓存\n\n\n      this.maps = {};\n\n      if (this.files) {\n        for (var i = 0; i < this.files.length; i++) {\n          var file = this.files[i];\n          this.maps[file.id] = file;\n        }\n      } // @ts-ignore\n\n\n      this.$nextTick(function () {\n        // 更新下父级\n        if (_this6.$parent) {\n          _this6.$parent.$forceUpdate(); // 拖拽渲染\n\n\n          _this6.$parent.$nextTick(function () {\n            _this6.watchDrop(_this6.drop);\n          });\n        } else {\n          // 拖拽渲染\n          _this6.watchDrop(_this6.drop);\n        }\n      });\n    },\n\n    /**\r\n     * beforeUnmount\r\n     * @return {[type]} [description]\r\n     */\n    beforeUnmount: function beforeUnmount() {\n      // 已销毁\n      this.destroy = true; // 设置成不激活\n\n      this.active = false; // 销毁拖拽事件\n\n      this.watchDrop(false);\n    },\n    computed: {\n      /**\r\n       * uploading 正在上传的线程\r\n       * @return {[type]} [description]\r\n       */\n\n      /**\r\n       * uploaded 文件列表是否全部已上传\r\n       * @return {[type]} [description]\r\n       */\n      uploaded: function uploaded() {\n        var file;\n\n        for (var i = 0; i < this.files.length; i++) {\n          file = this.files[i];\n\n          if (file.fileObject && !file.error && !file.success) {\n            return false;\n          }\n        }\n\n        return true;\n      },\n      chunkOptions: function chunkOptions() {\n        return Object.assign(CHUNK_DEFAULT_OPTIONS, this.chunk);\n      },\n      className: function className() {\n        return ['file-uploads', this.features.html5 ? 'file-uploads-html5' : 'file-uploads-html4', this.features.directory && this.directory ? 'file-uploads-directory' : undefined, this.features.drop && this.drop ? 'file-uploads-drop' : undefined, this.disabled ? 'file-uploads-disabled' : undefined];\n      },\n      forId: function forId() {\n        return this.inputId || this.name;\n      },\n      iMaximum: function iMaximum() {\n        if (this.maximum === undefined) {\n          return this.multiple ? 0 : 1;\n        }\n\n        return this.maximum;\n      },\n      iExtensions: function iExtensions() {\n        if (!this.extensions) {\n          return;\n        }\n\n        if (this.extensions instanceof RegExp) {\n          return this.extensions;\n        }\n\n        var exts = [];\n\n        if (typeof this.extensions === 'string') {\n          exts = this.extensions.split(',');\n        } else {\n          exts = this.extensions;\n        }\n\n        exts = exts.map(function (value) {\n          return value.trim();\n        }).filter(function (value) {\n          return value;\n        });\n        return new RegExp('\\\\.(' + exts.join('|').replace(/\\./g, '\\\\.') + ')$', 'i');\n      }\n    },\n    watch: {\n      active: function active(_active) {\n        this.watchActive(_active);\n      },\n      dropActive: function dropActive() {\n        if (this.$parent) {\n          this.$parent.$forceUpdate();\n        }\n      },\n      drop: function drop(value) {\n        this.watchDrop(value);\n      },\n      modelValue: function modelValue(files) {\n        if (this.files === files) {\n          return;\n        }\n\n        this.files = files;\n        var oldMaps = this.maps; // 重写 maps 缓存\n\n        this.maps = {};\n\n        for (var i = 0; i < this.files.length; i++) {\n          var file = this.files[i];\n          this.maps[file.id] = file;\n        } // add, update\n\n\n        for (var key in this.maps) {\n          var newFile = this.maps[key];\n          var oldFile = oldMaps[key];\n\n          if (newFile !== oldFile) {\n            this.emitFile(newFile, oldFile);\n          }\n        } // delete\n\n\n        for (var _key in oldMaps) {\n          if (!this.maps[_key]) {\n            this.emitFile(undefined, oldMaps[_key]);\n          }\n        }\n      }\n    },\n    methods: {\n      newId: function newId() {\n        return Math.random().toString(36).substr(2);\n      },\n      // 清空\n      clear: function clear() {\n        if (this.files.length) {\n          var files = this.files;\n          this.files = []; // 定位\n\n          this.maps = {}; // 事件\n\n          this.emitInput();\n\n          for (var i = 0; i < files.length; i++) {\n            this.emitFile(undefined, files[i]);\n          }\n        }\n\n        return true;\n      },\n      // 选择\n      get: function get(id) {\n        if (!id) {\n          return false;\n        }\n\n        if (_typeof(id) === 'object') {\n          return this.maps[id.id || ''] || false;\n        }\n\n        return this.maps[id] || false;\n      },\n      // 添加\n      add: function add(_files, index) {\n        // 不是数组整理成数组\n        var files;\n\n        if (_files instanceof Array) {\n          files = _files;\n        } else {\n          files = [_files];\n        }\n\n        if (index === undefined) {\n          // eslint-disable-next-line\n          index = this.addIndex;\n        } // 遍历规范对象\n\n\n        var addFiles = [];\n\n        for (var i = 0; i < files.length; i++) {\n          var file = files[i];\n\n          if (this.features.html5 && file instanceof Blob) {\n            file = {\n              id: '',\n              file: file,\n              size: file.size,\n              // @ts-ignore\n              name: file.webkitRelativePath || file.relativePath || file.name || 'unknown',\n              type: file.type\n            };\n          }\n\n          file = file;\n          var fileObject = false;\n          if (file.fileObject === false) ;else if (file.fileObject) {\n            fileObject = true;\n          } else if (typeof Element !== 'undefined' && file.el instanceof HTMLInputElement) {\n            fileObject = true;\n          } else if (typeof Blob !== 'undefined' && file.file instanceof Blob) {\n            fileObject = true;\n          }\n\n          if (fileObject) {\n            file = _objectSpread(_objectSpread({\n              fileObject: true,\n              size: -1,\n              name: 'Filename',\n              type: '',\n              active: false,\n              error: '',\n              success: false,\n              putAction: this.putAction,\n              postAction: this.postAction,\n              timeout: this.timeout\n            }, file), {}, {\n              response: {},\n              progress: '0.00',\n              speed: 0\n            });\n            file.data = _objectSpread(_objectSpread({}, this.data), file.data ? file.data : {});\n            file.headers = _objectSpread(_objectSpread({}, this.headers), file.headers ? file.headers : {});\n          } // 必须包含 id\n\n\n          if (!file.id) {\n            file.id = this.newId();\n          }\n\n          if (this.emitFilter(file, undefined)) {\n            continue;\n          } // 最大数量限制\n\n\n          if (this.iMaximum > 1 && addFiles.length + this.files.length >= this.iMaximum) {\n            break;\n          }\n\n          addFiles.push(file); // 最大数量限制\n\n          if (this.iMaximum === 1) {\n            break;\n          }\n        } // 没有文件\n\n\n        if (!addFiles.length) {\n          return;\n        } // 如果是 1 清空\n\n\n        if (this.iMaximum === 1) {\n          this.clear();\n        } // 添加进去 files\n\n\n        var newFiles;\n\n        if (index === true || index === 0) {\n          newFiles = addFiles.concat(this.files);\n        } else if (index) {\n          var _newFiles;\n\n          newFiles = this.files.concat([]);\n\n          (_newFiles = newFiles).splice.apply(_newFiles, [index, 0].concat(addFiles));\n        } else {\n          newFiles = this.files.concat(addFiles);\n        }\n\n        this.files = newFiles; // 定位\n\n        for (var _i = 0; _i < addFiles.length; _i++) {\n          var _file = addFiles[_i];\n          this.maps[_file.id] = _file;\n        } // 事件\n\n\n        this.emitInput();\n\n        for (var _i2 = 0; _i2 < addFiles.length; _i2++) {\n          this.emitFile(addFiles[_i2], undefined);\n        }\n\n        return _files instanceof Array ? addFiles : addFiles[0];\n      },\n      // 添加表单文件\n      addInputFile: function addInputFile(el) {\n        var _this7 = this;\n\n        var files = [];\n        var maximumValue = this.iMaximum; // @ts-ignore\n\n        var entrys = el.webkitEntries || el.entries || undefined;\n\n        if (entrys && entrys.length) {\n          return this.getFileSystemEntry(entrys).then(function (files) {\n            return _this7.add(files);\n          });\n        }\n\n        if (el.files) {\n          for (var i = 0; i < el.files.length; i++) {\n            var file = el.files[i];\n            files.push({\n              id: '',\n              size: file.size,\n              // @ts-ignore\n              name: file.webkitRelativePath || file.relativePath || file.name,\n              type: file.type,\n              file: file\n            });\n          }\n        } else {\n          var names = el.value.replace(/\\\\/g, '/').split('/');\n\n          if (!names || !names.length) {\n            names = [el.value];\n          } // @ts-ignore\n\n\n          delete el.__vuex__;\n          files.push({\n            id: '',\n            name: names[names.length - 1],\n            el: el\n          });\n        }\n\n        return Promise.resolve(this.add(files));\n      },\n      // 添加 DataTransfer\n      addDataTransfer: function addDataTransfer(dataTransfer) {\n        var _dataTransfer$items,\n            _this8 = this;\n\n        // dataTransfer.items 支持\n        if (dataTransfer !== null && dataTransfer !== void 0 && (_dataTransfer$items = dataTransfer.items) !== null && _dataTransfer$items !== void 0 && _dataTransfer$items.length) {\n          var entrys = []; // 遍历出所有 dataTransferVueUploadItem\n\n          for (var i = 0; i < dataTransfer.items.length; i++) {\n            var dataTransferTtem = dataTransfer.items[i];\n            var entry = void 0; // @ts-ignore\n\n            if (dataTransferTtem.getAsEntry) {\n              // @ts-ignore\n              entry = dataTransferTtem.getAsEntry() || dataTransferTtem.getAsFile();\n            } else if (dataTransferTtem.webkitGetAsEntry) {\n              entry = dataTransferTtem.webkitGetAsEntry() || dataTransferTtem.getAsFile();\n            } else {\n              entry = dataTransferTtem.getAsFile();\n            }\n\n            if (entry) {\n              entrys.push(entry);\n            }\n          }\n\n          return this.getFileSystemEntry(entrys).then(function (files) {\n            return _this8.add(files);\n          });\n        } // dataTransfer.files 支持\n\n\n        var maximumValue = this.iMaximum;\n        var files = [];\n\n        if (dataTransfer.files.length) {\n          for (var _i3 = 0; _i3 < dataTransfer.files.length; _i3++) {\n            files.push(dataTransfer.files[_i3]);\n\n            if (maximumValue > 0 && files.length >= maximumValue) {\n              break;\n            }\n          }\n\n          return Promise.resolve(this.add(files));\n        }\n\n        return Promise.resolve([]);\n      },\n      // 获得 entrys    \n      getFileSystemEntry: function getFileSystemEntry(entry) {\n        var _this9 = this;\n\n        var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        return new Promise(function (resolve) {\n          var maximumValue = _this9.iMaximum;\n\n          if (!entry) {\n            return resolve([]);\n          }\n\n          if (entry instanceof Array) {\n            // 多个\n            var uploadFiles = [];\n\n            var forEach = function forEach(i) {\n              var v = entry[i];\n\n              if (!v || maximumValue > 0 && uploadFiles.length >= maximumValue) {\n                return resolve(uploadFiles);\n              }\n\n              _this9.getFileSystemEntry(v, path).then(function (results) {\n                uploadFiles.push.apply(uploadFiles, _toConsumableArray(results));\n                forEach(i + 1);\n              });\n            };\n\n            forEach(0);\n            return;\n          }\n\n          if (entry instanceof Blob) {\n            resolve([{\n              id: '',\n              size: entry.size,\n              name: path + entry.name,\n              type: entry.type,\n              file: entry\n            }]);\n            return;\n          }\n\n          if (entry.isFile) {\n            entry.file(function (file) {\n              resolve([{\n                id: '',\n                size: file.size,\n                name: path + file.name,\n                type: file.type,\n                file: file\n              }]);\n            });\n            return;\n          }\n\n          if (entry.isDirectory && _this9.dropDirectory) {\n            var _uploadFiles = []; // 目录也要添加到文件列表\n\n            if (_this9.createDirectory) {\n              _uploadFiles.push({\n                id: '',\n                name: path + entry.name,\n                size: 0,\n                type: 'text/directory',\n                file: new File([], path + entry.name, {\n                  type: 'text/directory'\n                })\n              });\n            }\n\n            var dirReader = entry.createReader();\n\n            var readEntries = function readEntries() {\n              dirReader.readEntries(function (entries) {\n                var forEach = function forEach(i) {\n                  if (!entries[i] && i === 0 || maximumValue > 0 && _uploadFiles.length >= maximumValue) {\n                    return resolve(_uploadFiles);\n                  }\n\n                  if (!entries[i]) {\n                    return readEntries();\n                  }\n\n                  _this9.getFileSystemEntry(entries[i], path + entry.name + '/').then(function (results) {\n                    _uploadFiles.push.apply(_uploadFiles, _toConsumableArray(results));\n\n                    forEach(i + 1);\n                  });\n                };\n\n                forEach(0);\n              });\n            };\n\n            readEntries();\n            return;\n          }\n\n          resolve([]);\n        });\n      },\n      // 替换\n      replace: function replace(id1, id2) {\n        var file1 = this.get(id1);\n        var file2 = this.get(id2);\n\n        if (!file1 || !file2 || file1 === file2) {\n          return false;\n        }\n\n        var files = this.files.concat([]);\n        var index1 = files.indexOf(file1);\n        var index2 = files.indexOf(file2);\n\n        if (index1 === -1 || index2 === -1) {\n          return false;\n        }\n\n        files[index1] = file2;\n        files[index2] = file1;\n        this.files = files;\n        this.emitInput();\n        return true;\n      },\n      // 移除\n      remove: function remove(id) {\n        var file = this.get(id);\n\n        if (file) {\n          if (this.emitFilter(undefined, file)) {\n            return false;\n          }\n\n          var files = this.files.concat([]);\n          var index = files.indexOf(file);\n\n          if (index === -1) {\n            console.error('remove', file);\n            return false;\n          }\n\n          files.splice(index, 1);\n          this.files = files; // 定位\n\n          delete this.maps[file.id]; // 事件\n\n          this.emitInput();\n          this.emitFile(undefined, file);\n        }\n\n        return file;\n      },\n      // 更新\n      update: function update(id, data) {\n        var file = this.get(id);\n\n        if (file) {\n          var newFile = _objectSpread(_objectSpread({}, file), data); // 停用必须加上错误\n\n\n          if (file.fileObject && file.active && !newFile.active && !newFile.error && !newFile.success) {\n            newFile.error = 'abort';\n          }\n\n          if (this.emitFilter(newFile, file)) {\n            return false;\n          }\n\n          var files = this.files.concat([]);\n          var index = files.indexOf(file);\n\n          if (index === -1) {\n            console.error('update', file);\n            return false;\n          }\n\n          files.splice(index, 1, newFile);\n          this.files = files; // 删除  旧定位 写入 新定位 （已便支持修改id)\n\n          delete this.maps[file.id];\n          this.maps[newFile.id] = newFile; // 事件\n\n          this.emitInput();\n          this.emitFile(newFile, file);\n          return newFile;\n        }\n\n        return false;\n      },\n      // 预处理 事件 过滤器\n      emitFilter: function emitFilter(newFile, oldFile) {\n        var isPrevent = false;\n        this.$emit('input-filter', newFile, oldFile, function () {\n          var prevent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n          isPrevent = prevent;\n          return isPrevent;\n        });\n        return isPrevent;\n      },\n      // 处理后 事件 分发\n      emitFile: function emitFile(newFile, oldFile) {\n        var _newFile,\n            _this10 = this;\n\n        this.$emit('input-file', newFile, oldFile);\n\n        if ((_newFile = newFile) !== null && _newFile !== void 0 && _newFile.fileObject && newFile.active && (!oldFile || !oldFile.active)) {\n          this.uploading++; // 激活\n          // @ts-ignore\n\n          this.$nextTick(function () {\n            setTimeout(function () {\n              newFile && _this10.upload(newFile).then(function () {\n                var _newFile2;\n\n                if (newFile) {\n                  // eslint-disable-next-line\n                  newFile = _this10.get(newFile) || undefined;\n                }\n\n                if ((_newFile2 = newFile) !== null && _newFile2 !== void 0 && _newFile2.fileObject) {\n                  _this10.update(newFile, {\n                    active: false,\n                    success: !newFile.error\n                  });\n                }\n              }).catch(function (e) {\n                newFile && _this10.update(newFile, {\n                  active: false,\n                  success: false,\n                  error: e.code || e.error || e.message || e\n                });\n              });\n            }, Math.ceil(Math.random() * 50 + 50));\n          });\n        } else if ((!newFile || !newFile.fileObject || !newFile.active) && oldFile && oldFile.fileObject && oldFile.active) {\n          // 停止\n          this.uploading--;\n        } // 自动延续激活\n        // @ts-ignore\n\n\n        if (this.active && (Boolean(newFile) !== Boolean(oldFile) || newFile.active !== oldFile.active)) {\n          this.watchActive(true);\n        }\n      },\n      emitInput: function emitInput() {\n        this.$emit('update:modelValue', this.files);\n      },\n      // 上传\n      upload: function upload(id) {\n        var file = this.get(id); // 被删除\n\n        if (!file) {\n          return Promise.reject(new Error('not_exists'));\n        } // 不是文件对象\n\n\n        if (!file.fileObject) {\n          return Promise.reject(new Error('file_object'));\n        } // 有错误直接响应\n\n\n        if (file.error) {\n          if (file.error instanceof Error) {\n            return Promise.reject(file.error);\n          }\n\n          return Promise.reject(new Error(file.error));\n        } // 已完成直接响应\n\n\n        if (file.success) {\n          return Promise.resolve(file);\n        } // 后缀\n\n\n        var extensions = this.extensions;\n\n        if (file.name && this.iExtensions) {\n          if (file.name.search(this.iExtensions) === -1) {\n            return Promise.reject(new Error('extension'));\n          }\n        } // 大小\n\n\n        if (this.size > 0 && file.size !== undefined && file.size >= 0 && file.size > this.size) {\n          return Promise.reject(new Error('size'));\n        }\n\n        if (this.customAction) {\n          return this.customAction(file, this);\n        }\n\n        if (this.features.html5) {\n          if (this.shouldUseChunkUpload(file)) {\n            return this.uploadChunk(file);\n          }\n\n          if (file.putAction) {\n            return this.uploadPut(file);\n          }\n\n          if (file.postAction) {\n            return this.uploadHtml5(file);\n          }\n        }\n\n        if (file.postAction) {\n          return this.uploadHtml4(file);\n        }\n\n        return Promise.reject(new Error('No action configured'));\n      },\n\n      /**\r\n       * Whether this file should be uploaded using chunk upload or not\r\n       *\r\n       * @param Object file\r\n       */\n      shouldUseChunkUpload: function shouldUseChunkUpload(file) {\n        return this.chunkEnabled && !!this.chunkOptions.handler && file.size && file.size > this.chunkOptions.minSize;\n      },\n\n      /**\r\n       * Upload a file using Chunk method\r\n       *\r\n       * @param File file\r\n       */\n      uploadChunk: function uploadChunk(file) {\n        var HandlerClass = this.chunkOptions.handler;\n        file.chunk = new HandlerClass(file, this.chunkOptions);\n        return file.chunk.upload().then(function (res) {\n          return file;\n        });\n      },\n      uploadPut: function uploadPut(file) {\n        var querys = [];\n        var value;\n\n        for (var key in file.data) {\n          value = file.data[key];\n\n          if (value !== null && value !== undefined) {\n            querys.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n          }\n        }\n\n        var putAction = file.putAction || '';\n        var queryString = querys.length ? (putAction.indexOf('?') === -1 ? '?' : '&') + querys.join('&') : '';\n        var xhr = new XMLHttpRequest();\n        xhr.open('PUT', putAction + queryString);\n        return this.uploadXhr(xhr, file, file.file);\n      },\n      uploadHtml5: function uploadHtml5(file) {\n        var form = new window.FormData();\n        var value;\n\n        for (var key in file.data) {\n          value = file.data[key];\n\n          if (value && _typeof(value) === 'object' && typeof value.toString !== 'function') {\n            if (value instanceof File) {\n              form.append(key, value, value.name);\n            } else {\n              form.append(key, JSON.stringify(value));\n            }\n          } else if (value !== null && value !== undefined) {\n            form.append(key, value);\n          }\n        } // @ts-ignore\n\n\n        form.append(this.name, file.file, file.file.name || file.file.filename || file.name);\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', file.postAction || '');\n        return this.uploadXhr(xhr, file, form);\n      },\n      uploadXhr: function uploadXhr(xhr, ufile, body) {\n        var _this11 = this;\n\n        var file = ufile;\n        var speedTime = 0;\n        var speedLoaded = 0; // 进度条\n\n        xhr.upload.onprogress = function (e) {\n          // 还未开始上传 已删除 未激活\n          if (!file) {\n            return;\n          }\n\n          file = _this11.get(file);\n\n          if (!e.lengthComputable || !file || !file.fileObject || !file.active) {\n            return;\n          } // 进度 速度 每秒更新一次\n\n\n          var speedTime2 = Math.round(Date.now() / 1000);\n\n          if (speedTime2 === speedTime) {\n            return;\n          }\n\n          speedTime = speedTime2;\n          file = _this11.update(file, {\n            progress: (e.loaded / e.total * 100).toFixed(2),\n            speed: e.loaded - speedLoaded\n          });\n          speedLoaded = e.loaded;\n        }; // 检查激活状态\n\n\n        var interval = window.setInterval(function () {\n          if (file) {\n            var _file2;\n\n            file = _this11.get(file);\n\n            if (file && (_file2 = file) !== null && _file2 !== void 0 && _file2.fileObject && !file.success && !file.error && file.active) {\n              return;\n            }\n          }\n\n          if (interval) {\n            clearInterval(interval);\n            interval = undefined;\n          }\n\n          try {\n            xhr.abort();\n            xhr.timeout = 1;\n          } catch (e) {}\n        }, 100);\n        return new Promise(function (resolve, reject) {\n          if (!file) {\n            return reject(new Error('not_exists'));\n          }\n\n          var complete;\n\n          var fn = function fn(e) {\n            // 已经处理过了\n            if (complete) {\n              return;\n            }\n\n            complete = true;\n\n            if (interval) {\n              clearInterval(interval);\n              interval = undefined;\n            }\n\n            if (!file) {\n              return reject(new Error('not_exists'));\n            }\n\n            file = _this11.get(file); // 不存在直接响应\n\n            if (!file) {\n              return reject(new Error('not_exists'));\n            } // 不是文件对象\n\n\n            if (!file.fileObject) {\n              return reject(new Error('file_object'));\n            } // 有错误自动响应\n\n\n            if (file.error) {\n              if (file.error instanceof Error) {\n                return reject(file.error);\n              }\n\n              return reject(new Error(file.error));\n            } // 未激活\n\n\n            if (!file.active) {\n              return reject(new Error('abort'));\n            } // 已完成 直接相应\n\n\n            if (file.success) {\n              return resolve(file);\n            }\n\n            var data = {};\n\n            switch (e.type) {\n              case 'timeout':\n              case 'abort':\n                data.error = e.type;\n                break;\n\n              case 'error':\n                if (!xhr.status) {\n                  data.error = 'network';\n                } else if (xhr.status >= 500) {\n                  data.error = 'server';\n                } else if (xhr.status >= 400) {\n                  data.error = 'denied';\n                }\n\n                break;\n\n              default:\n                if (xhr.status >= 500) {\n                  data.error = 'server';\n                } else if (xhr.status >= 400) {\n                  data.error = 'denied';\n                } else {\n                  data.progress = '100.00';\n                }\n\n            }\n\n            if (xhr.responseText) {\n              var contentType = xhr.getResponseHeader('Content-Type');\n\n              if (contentType && contentType.indexOf('/json') !== -1) {\n                data.response = JSON.parse(xhr.responseText);\n              } else {\n                data.response = xhr.responseText;\n              }\n            } // 更新\n            // @ts-ignore\n\n\n            file = _this11.update(file, data);\n\n            if (!file) {\n              return reject(new Error('abort'));\n            } // 有错误自动响应\n\n\n            if (file.error) {\n              if (file.error instanceof Error) {\n                return reject(file.error);\n              }\n\n              return reject(new Error(file.error));\n            } // 响应\n\n\n            return resolve(file);\n          }; // 事件\n\n\n          xhr.onload = fn;\n          xhr.onerror = fn;\n          xhr.onabort = fn;\n          xhr.ontimeout = fn; // 超时\n\n          if (file.timeout) {\n            xhr.timeout = file.timeout;\n          } // headers\n\n\n          for (var key in file.headers) {\n            xhr.setRequestHeader(key, file.headers[key]);\n          } // 更新 xhr\n          // @ts-ignore\n\n\n          file = _this11.update(file, {\n            xhr: xhr\n          }); // 开始上传\n\n          file && xhr.send(body);\n        });\n      },\n      uploadHtml4: function uploadHtml4(ufile) {\n        var _this12 = this;\n\n        var file = ufile;\n\n        if (!file) {\n          return Promise.reject(new Error('not_exists'));\n        }\n\n        var onKeydown = function onKeydown(e) {\n          if (e.keyCode === 27) {\n            e.preventDefault();\n          }\n        };\n\n        var iframe = document.createElement('iframe');\n        iframe.id = 'upload-iframe-' + file.id;\n        iframe.name = 'upload-iframe-' + file.id;\n        iframe.src = 'about:blank';\n        iframe.setAttribute('style', 'width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;');\n        var form = document.createElement('form');\n        form.setAttribute('action', file.postAction || '');\n        form.name = 'upload-form-' + file.id;\n        form.setAttribute('method', 'POST');\n        form.setAttribute('target', 'upload-iframe-' + file.id);\n        form.setAttribute('enctype', 'multipart/form-data');\n\n        for (var key in file.data) {\n          var value = file.data[key];\n\n          if (value && _typeof(value) === 'object' && typeof value.toString !== 'function') {\n            value = JSON.stringify(value);\n          }\n\n          if (value !== null && value !== undefined) {\n            var el = document.createElement('input');\n            el.type = 'hidden';\n            el.name = key;\n            el.value = value;\n            form.appendChild(el);\n          }\n        }\n\n        form.appendChild(file.el);\n        document.body.appendChild(iframe).appendChild(form);\n\n        var getResponseData = function getResponseData() {\n          var _doc;\n\n          var doc;\n\n          try {\n            if (iframe.contentWindow) {\n              doc = iframe.contentWindow.document;\n            }\n          } catch (err) {}\n\n          if (!doc) {\n            try {\n              // @ts-ignore\n              doc = iframe.contentDocument ? iframe.contentDocument : iframe.document;\n            } catch (err) {\n              // @ts-ignore\n              doc = iframe.document;\n            }\n          } // @ts-ignore\n\n\n          if ((_doc = doc) !== null && _doc !== void 0 && _doc.body) {\n            return doc.body.innerHTML;\n          }\n\n          return null;\n        };\n\n        return new Promise(function (resolve, reject) {\n          setTimeout(function () {\n            if (!file) {\n              return reject(new Error('not_exists'));\n            }\n\n            file = _this12.update(file, {\n              iframe: iframe\n            }); // 不存在\n\n            if (!file) {\n              return reject(new Error('not_exists'));\n            } // 定时检查\n\n\n            var interval = window.setInterval(function () {\n              if (file) {\n                var _file3;\n\n                file = _this12.get(file);\n\n                if (file && (_file3 = file) !== null && _file3 !== void 0 && _file3.fileObject && !file.success && !file.error && file.active) {\n                  return;\n                }\n              }\n\n              if (interval) {\n                clearInterval(interval);\n                interval = undefined;\n              } // @ts-ignore\n\n\n              iframe.onabort({\n                type: file ? 'abort' : 'not_exists'\n              });\n            }, 100);\n            var complete;\n\n            var fn = function fn(e) {\n              var _file4;\n\n              // 已经处理过了\n              if (complete) {\n                return;\n              }\n\n              complete = true;\n\n              if (interval) {\n                clearInterval(interval);\n                interval = undefined;\n              } // 关闭 esc 事件\n\n\n              document.body.removeEventListener('keydown', onKeydown);\n\n              if (!file) {\n                return reject(new Error('not_exists'));\n              }\n\n              file = _this12.get(file); // 不存在直接响应\n\n              if (!file) {\n                return reject(new Error('not_exists'));\n              } // 不是文件对象\n\n\n              if (!file.fileObject) {\n                return reject(new Error('file_object'));\n              } // 有错误自动响应\n\n\n              if (file.error) {\n                if (file.error instanceof Error) {\n                  return reject(file.error);\n                }\n\n                return reject(new Error(file.error));\n              } // 未激活\n\n\n              if (!file.active) {\n                return reject(new Error('abort'));\n              } // 已完成 直接相应\n\n\n              if (file.success) {\n                return resolve(file);\n              }\n\n              var response = getResponseData();\n              var data = {};\n\n              if (typeof e === 'string') {\n                return reject(new Error(e));\n              }\n\n              switch (e.type) {\n                case 'abort':\n                  data.error = 'abort';\n                  break;\n\n                case 'error':\n                  if (file.error) {\n                    data.error = file.error;\n                  } else if (response === null) {\n                    data.error = 'network';\n                  } else {\n                    data.error = 'denied';\n                  }\n\n                  break;\n\n                default:\n                  if (file.error) {\n                    data.error = file.error;\n                  } else if (response === null) {\n                    data.error = 'network';\n                  } else {\n                    data.progress = '100.00';\n                  }\n\n              }\n\n              if (response !== null) {\n                if (response && response.substr(0, 1) === '{' && response.substr(response.length - 1, 1) === '}') {\n                  try {\n                    response = JSON.parse(response);\n                  } catch (err) {}\n                }\n\n                data.response = response;\n              } // 更新\n\n\n              file = _this12.update(file, data);\n\n              if (!file) {\n                return reject(new Error('not_exists'));\n              }\n\n              if ((_file4 = file) !== null && _file4 !== void 0 && _file4.error) {\n                if (file.error instanceof Error) {\n                  return reject(file.error);\n                }\n\n                return reject(new Error(file.error));\n              } // 响应\n\n\n              return resolve(file);\n            }; // 添加事件\n\n\n            iframe.onload = fn;\n            iframe.onerror = fn;\n            iframe.onabort = fn; // 禁止 esc 键\n\n            document.body.addEventListener('keydown', onKeydown); // 提交\n\n            form.submit();\n          }, 50);\n        }).then(function (res) {\n          var _iframe$parentNode;\n\n          iframe === null || iframe === void 0 ? void 0 : (_iframe$parentNode = iframe.parentNode) === null || _iframe$parentNode === void 0 ? void 0 : _iframe$parentNode.removeChild(iframe);\n          return res;\n        }).catch(function (res) {\n          var _iframe$parentNode2;\n\n          iframe === null || iframe === void 0 ? void 0 : (_iframe$parentNode2 = iframe.parentNode) === null || _iframe$parentNode2 === void 0 ? void 0 : _iframe$parentNode2.removeChild(iframe);\n          return res;\n        });\n      },\n      watchActive: function watchActive(active) {\n        var file;\n        var index = 0;\n\n        while (file = this.files[index]) {\n          index++;\n          if (!file.fileObject) ;else if (active && !this.destroy) {\n            if (this.uploading >= this.thread || this.uploading && !this.features.html5) {\n              break;\n            }\n\n            if (!file.active && !file.error && !file.success) {\n              this.update(file, {\n                active: true\n              });\n            }\n          } else {\n            if (file.active) {\n              this.update(file, {\n                active: false\n              });\n            }\n          }\n        }\n\n        if (this.uploading === 0) {\n          this.active = false;\n        }\n      },\n      watchDrop: function watchDrop(newDrop) {\n        var oldDrop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n        if (!this.features.drop) {\n          return;\n        }\n\n        if (newDrop === oldDrop) {\n          return;\n        } // 移除挂载\n\n\n        if (this.dropElement) {\n          try {\n            document.removeEventListener('dragenter', this.onDragenter, false);\n            document.removeEventListener('dragleave', this.onDragleave, false);\n            document.removeEventListener('drop', this.onDocumentDrop, false);\n            this.dropElement.removeEventListener('dragover', this.onDragover, false);\n            this.dropElement.removeEventListener('drop', this.onDrop, false);\n          } catch (e) {}\n        }\n\n        var el = null;\n        if (!newDrop) ;else if (typeof newDrop === 'string') {\n          // @ts-ignore\n          var _el = document.querySelector(newDrop) || this.$root.$el.querySelector(newDrop);\n        } else if (newDrop === true) {\n          // @ts-ignore\n          el = this.$parent.$el;\n        } else {\n          el = newDrop;\n        }\n        this.dropElement = el;\n\n        if (this.dropElement) {\n          document.addEventListener('dragenter', this.onDragenter, false);\n          document.addEventListener('dragleave', this.onDragleave, false);\n          document.addEventListener('drop', this.onDocumentDrop, false);\n          this.dropElement.addEventListener('dragover', this.onDragover, false);\n          this.dropElement.addEventListener('drop', this.onDrop, false);\n        }\n      },\n      onDragenter: function onDragenter(e) {\n        var _dt$files, _dt$types;\n\n        e.preventDefault();\n\n        if (this.dropActive) {\n          return;\n        }\n\n        if (!e.dataTransfer) {\n          return;\n        }\n\n        var dt = e.dataTransfer;\n\n        if (dt !== null && dt !== void 0 && (_dt$files = dt.files) !== null && _dt$files !== void 0 && _dt$files.length) {\n          this.dropActive = true;\n        } else if (!dt.types) {\n          this.dropActive = true;\n        } else if (dt.types.indexOf && dt.types.indexOf('Files') !== -1) {\n          this.dropActive = true; // @ts-ignore\n        } else if ((_dt$types = dt.types) !== null && _dt$types !== void 0 && _dt$types.contains && dt.types.contains('Files')) {\n          this.dropActive = true;\n        }\n      },\n      onDragleave: function onDragleave(e) {\n        e.preventDefault();\n\n        if (!this.dropActive) {\n          return;\n        } // @ts-ignore\n\n\n        if (e.target.nodeName === 'HTML' || e.target === e.explicitOriginalTarget || !e.fromElement && (e.clientX <= 0 || e.clientY <= 0 || e.clientX >= window.innerWidth || e.clientY >= window.innerHeight)) {\n          this.dropActive = false;\n        }\n      },\n      onDragover: function onDragover(e) {\n        e.preventDefault();\n      },\n      onDocumentDrop: function onDocumentDrop() {\n        this.dropActive = false;\n      },\n      onDrop: function onDrop(e) {\n        e.preventDefault();\n        e.dataTransfer && this.addDataTransfer(e.dataTransfer);\n      },\n      inputOnChange: function (_inputOnChange) {\n        function inputOnChange(_x) {\n          return _inputOnChange.apply(this, arguments);\n        }\n\n        inputOnChange.toString = function () {\n          return _inputOnChange.toString();\n        };\n\n        return inputOnChange;\n      }(async function (e) {\n        var _this13 = this;\n\n        if (!(e.target instanceof HTMLInputElement)) {\n          return Promise.reject(new Error(\"not HTMLInputElement\"));\n        }\n\n        var target = e.target;\n\n        var reinput = function reinput(res) {\n          if (target.files) {\n            target.value = '';\n\n            if (target.files.length && !/safari/i.test(navigator.userAgent)) {\n              target.type = '';\n              target.type = 'file';\n            }\n          } else {\n            var _oldInput$parentNode;\n\n            // ie9 fix #219\n            var oldInput = document.getElementById(_this13.forId);\n            var newInput = oldInput.cloneNode(true);\n            newInput.value = '';\n            newInput.type = 'file'; // @ts-ignore\n\n            newInput.onChange = inputOnChange;\n            (_oldInput$parentNode = oldInput.parentNode) === null || _oldInput$parentNode === void 0 ? void 0 : _oldInput$parentNode.replaceChild(newInput, oldInput);\n            _this13.$refs.input = newInput;\n          }\n\n          return res;\n        };\n\n        return this.addInputFile(e.target).then(reinput).catch(reinput);\n      })\n    }\n  });\n\n  function render(_ctx, _cache, $props, $setup, $data, $options) {\n    return vue.openBlock(), vue.createBlock(\"span\", {\n      class: _ctx.className\n    }, [vue.renderSlot(_ctx.$slots, \"default\"), vue.createVNode(\"label\", {\n      for: _ctx.forId\n    }, null, 8, [\"for\"]), vue.createVNode(\"input\", {\n      ref: \"input\",\n      type: \"file\",\n      name: _ctx.name,\n      id: _ctx.forId,\n      accept: _ctx.accept,\n      capture: _ctx.capture,\n      disabled: _ctx.disabled,\n      webkitdirectory: _ctx.directory && _ctx.features.directory,\n      allowdirs: _ctx.directory && _ctx.features.directory,\n      directory: _ctx.directory && _ctx.features.directory,\n      multiple: _ctx.multiple && _ctx.features.html5,\n      onChange: _cache[1] || (_cache[1] = function () {\n        return _ctx.inputOnChange && _ctx.inputOnChange.apply(_ctx, arguments);\n      })\n    }, null, 40, [\"name\", \"id\", \"accept\", \"capture\", \"disabled\", \"webkitdirectory\", \"allowdirs\", \"directory\", \"multiple\"])], 2);\n  }\n\n  function styleInject(css, ref) {\n    if (ref === void 0) ref = {};\n    var insertAt = ref.insertAt;\n\n    if (!css || typeof document === 'undefined') {\n      return;\n    }\n\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var style = document.createElement('style');\n    style.type = 'text/css';\n\n    if (insertAt === 'top') {\n      if (head.firstChild) {\n        head.insertBefore(style, head.firstChild);\n      } else {\n        head.appendChild(style);\n      }\n    } else {\n      head.appendChild(style);\n    }\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n  }\n\n  var css_248z = \"\\n.file-uploads {\\n  overflow: hidden;\\n  position: relative;\\n  text-align: center;\\n  display: inline-block;\\n}\\n.file-uploads.file-uploads-html4 input, .file-uploads.file-uploads-html5 label {\\n  /* background fix ie  click */\\n  background: #fff;\\n  opacity: 0;\\n  font-size: 20em;\\n  z-index: 1;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n}\\n.file-uploads.file-uploads-html5 input, .file-uploads.file-uploads-html4 label {\\n  /* background fix ie  click */\\n  background: rgba(255, 255, 255, 0);\\n  overflow: hidden;\\n  position: fixed;\\n  width: 1px;\\n  height: 1px;\\n  z-index: -1;\\n  opacity: 0;\\n}\\n\";\n  styleInject(css_248z);\n  script.render = render;\n\n  return script;\n\n})));\n//# sourceMappingURL=vue-upload-component.js.map\n"],"names":["_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","Symbol","iterator","Object","from","_iterableToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","test","_unsupportedIterableToArray","TypeError","_nonIterableSpread","len","length","i","arr2","_ownKeys","object","enumerableOnly","symbols","keys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","obj","value","defineProperty","configurable","writable","getOwnPropertyDescriptors","defineProperties","_typeof","_defineProperties","props","descriptor","ownKeys","_objectSpread2","request","options","xhr","body","createRequest","Promise","resolve","reject","onload","status","response","JSON","parse","err","onerror","send","stringify","vue","CHUNK_DEFAULT_OPTIONS","module","require$$0","XMLHttpRequest","open","method","url","responseType","headers","setRequestHeader","action","minSize","maxActive","maxRetries","handler","ChunkUploadHandler","file","instance","_classCallCheck","this","chunks","sessionId","chunkSize","Constructor","protoProps","staticProps","start","end","fileSize","blob","startOffset","active","retries","progress","stopChunks","chunksUploading","chunk","abort","startChunking","_this","promise","_this2","Content-Type","startBody","phase","mime_type","fileType","size","fileName","then","res","data","session_id","end_offset","createChunks","catch","maxActiveChunks","uploadNextChunk","hasChunksToUpload","uploadChunk","chunksToUpload","finish","_this3","updateFileProgress","upload","addEventListener","evt","lengthComputable","Math","round","loaded","total","FormData","append","sendFormRequest","uploadBody","start_offset","uploaded","_this4","finishBody","get","parseInt","type","_this5","completedProgress","chunksUploaded","uploadingProgress","reduce","min","console","log","script","defineComponent","inputId","String","default","accept","capture","disabled","multiple","Boolean","maximum","Number","addIndex","directory","createDirectory","postAction","putAction","customAction","Function","timeout","drop","dropDirectory","extensions","RegExp","modelValue","thread","chunkEnabled","emits","files","features","html5","dropActive","uploading","destroy","maps","dropElement","mounted","_this6","input","document","createElement","window","webkitdirectory","ondrop","id","$nextTick","$parent","$forceUpdate","watchDrop","beforeUnmount","computed","fileObject","error","success","chunkOptions","assign","className","undefined","forId","iMaximum","iExtensions","exts","split","map","trim","join","replace","watch","_active","watchActive","oldMaps","_key","newFile","oldFile","emitFile","methods","newId","random","substr","clear","emitInput","add","_files","index","newFiles","addFiles","Blob","webkitRelativePath","relativePath","Element","el","HTMLInputElement","speed","emitFilter","concat","splice","_i","_file","_i2","addInputFile","_this7","entrys","webkitEntries","entries","getFileSystemEntry","names","__vuex__","addDataTransfer","dataTransfer","_dataTransfer$items","_this8","items","dataTransferTtem","entry","getAsEntry","getAsFile","webkitGetAsEntry","maximumValue","_i3","_this9","path","uploadFiles","_uploadFiles","dirReader","v","results","isFile","isDirectory","File","createReader","readEntries","id1","id2","file1","file2","index1","indexOf","index2","remove","update","isPrevent","$emit","_this10","setTimeout","e","code","message","ceil","Error","search","shouldUseChunkUpload","uploadPut","uploadHtml5","uploadHtml4","HandlerClass","querys","encodeURIComponent","queryString","uploadXhr","form","filename","ufile","_this11","speedTime","speedLoaded","onprogress","speedTime2","Date","now","toFixed","interval","setInterval","clearInterval","fn","complete","contentType","responseText","getResponseHeader","onabort","ontimeout","_this12","onKeydown","keyCode","preventDefault","iframe","src","setAttribute","appendChild","removeEventListener","doc","contentWindow","contentDocument","innerHTML","getResponseData","submit","_iframe$parentNode","parentNode","removeChild","_iframe$parentNode2","newDrop","oldDrop","onDragenter","onDragleave","onDocumentDrop","onDragover","onDrop","querySelector","$root","$el","_dt$types","dt","_dt$files","types","contains","nodeName","explicitOriginalTarget","fromElement","clientX","clientY","innerWidth","innerHeight","inputOnChange","_inputOnChange","_x","async","_this13","reinput","_oldInput$parentNode","oldInput","newInput","navigator","userAgent","getElementById","cloneNode","onChange","replaceChild","$refs","css","ref","head","insertAt","getElementsByTagName","style","firstChild","insertBefore","styleSheet","cssText","createTextNode","styleInject","render","_ctx","_cache","$props","$setup","$data","$options","openBlock","createBlock","class","renderSlot","$slots","createVNode","for","allowdirs"],"mappings":"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"}